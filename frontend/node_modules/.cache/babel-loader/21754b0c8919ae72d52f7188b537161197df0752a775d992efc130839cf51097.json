{"ast":null,"code":"import _objectSpread from\"C:/Users/madha/OneDrive/Desktop/StudentsProject/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentDashboard=()=>{const[student,setStudent]=useState(null);const[form,setForm]=useState({name:'',email:'',course:''});const[error,setError]=useState('');const[success,setSuccess]=useState('');const token=localStorage.getItem('token');const BASE_URL='https://student-s-app.onrender.com';const fetchProfile=async()=>{try{const res=await axios.get(\"\".concat(BASE_URL,\"/api/auth/me\"),{headers:{Authorization:\"Bearer \".concat(token)}});setStudent(res.data.user);setForm({name:res.data.user.name,email:res.data.user.email,course:res.data.user.course||''});}catch(err){setError('Failed to fetch profile');localStorage.removeItem('token');localStorage.removeItem('role');window.location.href='/login';}};useEffect(()=>{fetchProfile();},[]);const onChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));setSuccess('');setError('');};const onSubmit=async e=>{e.preventDefault();try{await axios.put(\"\".concat(BASE_URL,\"/api/students/me\"),form,{headers:{Authorization:\"Bearer \".concat(token)}});setSuccess('Profile updated successfully');fetchProfile();}catch(_unused){setError('Failed to update profile');}};const logout=()=>{localStorage.removeItem('token');localStorage.removeItem('role');window.location.href='/login';};if(!student)return/*#__PURE__*/_jsxs(\"div\",{className:\"student-dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Student Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading profile...\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"student-dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Student Dashboard\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),success&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:success}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:onChange}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:form.email,onChange:onChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"course\",value:form.course,onChange:onChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Profile\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"})]});};export default StudentDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","StudentDashboard","student","setStudent","form","setForm","name","email","course","error","setError","success","setSuccess","token","localStorage","getItem","BASE_URL","fetchProfile","res","get","concat","headers","Authorization","data","user","err","removeItem","window","location","href","onChange","e","_objectSpread","target","value","onSubmit","preventDefault","put","_unused","logout","className","children","style","color","type","onClick"],"sources":["C:/Users/madha/OneDrive/Desktop/StudentsProject/frontend/src/components/StudentDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst StudentDashboard = () => {\r\n  const [student, setStudent] = useState(null);\r\n  const [form, setForm] = useState({ name: '', email: '', course: '' });\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const token = localStorage.getItem('token');\r\n  const BASE_URL = 'https://student-s-app.onrender.com';\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      const res = await axios.get(`${BASE_URL}/api/auth/me`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setStudent(res.data.user);\r\n      setForm({\r\n        name: res.data.user.name,\r\n        email: res.data.user.email,\r\n        course: res.data.user.course || '',\r\n      });\r\n    } catch (err) {\r\n      setError('Failed to fetch profile');\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('role');\r\n      window.location.href = '/login';\r\n    }\r\n  };\r\n\r\n  useEffect(() => { fetchProfile(); }, []);\r\n\r\n  const onChange = e => { setForm({ ...form, [e.target.name]: e.target.value }); setSuccess(''); setError(''); };\r\n\r\n  const onSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.put(`${BASE_URL}/api/students/me`, form, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setSuccess('Profile updated successfully');\r\n      fetchProfile();\r\n    } catch {\r\n      setError('Failed to update profile');\r\n    }\r\n  };\r\n\r\n  const logout = () => { localStorage.removeItem('token'); localStorage.removeItem('role'); window.location.href = '/login'; };\r\n\r\n  if (!student) return <div className=\"student-dashboard\"><h2>Student Dashboard</h2><p>Loading profile...</p></div>;\r\n\r\n  return (\r\n    <div className=\"student-dashboard\">\r\n      <h2>Student Dashboard</h2>\r\n      {error && <p style={{color:'red'}}>{error}</p>}\r\n      {success && <p style={{color:'green'}}>{success}</p>}\r\n      <form onSubmit={onSubmit}>\r\n        <input type=\"text\" name=\"name\" value={form.name} onChange={onChange} />\r\n        <input type=\"email\" name=\"email\" value={form.email} onChange={onChange} />\r\n        <input type=\"text\" name=\"course\" value={form.course} onChange={onChange} />\r\n        <button type=\"submit\">Update Profile</button>\r\n      </form>\r\n      <button onClick={logout}>Logout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}