{"ast":null,"code":"import _objectSpread from\"C:/Users/madha/OneDrive/Desktop/StudentsProject/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const[students,setStudents]=useState([]);const[form,setForm]=useState({name:'',email:'',course:''});const[editId,setEditId]=useState(null);const[error,setError]=useState('');const[loading,setLoading]=useState(true);const navigate=useNavigate();const token=localStorage.getItem('token');const fetchStudents=async()=>{if(!token)return navigate('/login');try{const res=await axios.get('http://localhost:5000/api/students',{headers:{Authorization:\"Bearer \".concat(token)}});setStudents(res.data||[]);}catch(err){setError('Failed to fetch students');}finally{setLoading(false);}};useEffect(()=>{fetchStudents();},[]);const onChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const onSubmit=async e=>{e.preventDefault();if(!token)return navigate('/login');try{if(editId){await axios.put(\"http://localhost:5000/api/students/\".concat(editId),form,{headers:{Authorization:\"Bearer \".concat(token)}});}else{await axios.post('http://localhost:5000/api/students',form,{headers:{Authorization:\"Bearer \".concat(token)}});}setForm({name:'',email:'',course:''});setEditId(null);fetchStudents();}catch(err){setError('Failed to save student');}};const onEdit=student=>{var _student$user,_student$user2;setEditId(student._id);setForm({name:((_student$user=student.user)===null||_student$user===void 0?void 0:_student$user.name)||'',email:((_student$user2=student.user)===null||_student$user2===void 0?void 0:_student$user2.email)||'',course:student.course||''});};const onDelete=async id=>{if(!token)return navigate('/login');try{await axios.delete(\"http://localhost:5000/api/students/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});fetchStudents();}catch(err){setError('Failed to delete student');}};const logout=()=>{localStorage.removeItem('token');localStorage.removeItem('role');navigate('/login');};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading students...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Dashboard\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Student Name\",value:form.name,onChange:onChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Student Email\",value:form.email,onChange:onChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"course\",placeholder:\"Course\",value:form.course,onChange:onChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:editId?'Update Student':'Add Student'})]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:students.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"No students found\"})}):students.map(student=>{var _student$user3,_student$user4;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:((_student$user3=student.user)===null||_student$user3===void 0?void 0:_student$user3.name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:((_student$user4=student.user)===null||_student$user4===void 0?void 0:_student$user4.email)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:student.course||'N/A'}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onEdit(student),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(student._id),children:\"Delete\"})]})]},student._id);})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,style:{marginTop:'20px'},children:\"Logout\"})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminDashboard","students","setStudents","form","setForm","name","email","course","editId","setEditId","error","setError","loading","setLoading","navigate","token","localStorage","getItem","fetchStudents","res","get","headers","Authorization","concat","data","err","onChange","e","_objectSpread","target","value","onSubmit","preventDefault","put","post","onEdit","student","_student$user","_student$user2","_id","user","onDelete","id","delete","logout","removeItem","children","className","style","color","marginBottom","type","placeholder","required","length","colSpan","map","_student$user3","_student$user4","onClick","marginTop"],"sources":["C:/Users/madha/OneDrive/Desktop/StudentsProject/frontend/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AdminDashboard = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [form, setForm] = useState({ name: '', email: '', course: '' });\r\n  const [editId, setEditId] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  const token = localStorage.getItem('token');\r\n\r\n  const fetchStudents = async () => {\r\n    if (!token) return navigate('/login');\r\n    try {\r\n      const res = await axios.get('http://localhost:5000/api/students', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setStudents(res.data || []);\r\n    } catch (err) {\r\n      setError('Failed to fetch students');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  const onChange = e => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = async e => {\r\n    e.preventDefault();\r\n    if (!token) return navigate('/login');\r\n    try {\r\n      if (editId) {\r\n        await axios.put(`http://localhost:5000/api/students/${editId}`, form, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n      } else {\r\n        await axios.post('http://localhost:5000/api/students', form, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n      }\r\n      setForm({ name: '', email: '', course: '' });\r\n      setEditId(null);\r\n      fetchStudents();\r\n    } catch (err) {\r\n      setError('Failed to save student');\r\n    }\r\n  };\r\n\r\n  const onEdit = student => {\r\n    setEditId(student._id);\r\n    setForm({\r\n      name: student.user?.name || '',\r\n      email: student.user?.email || '',\r\n      course: student.course || '',\r\n    });\r\n  };\r\n\r\n  const onDelete = async id => {\r\n    if (!token) return navigate('/login');\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/students/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      fetchStudents();\r\n    } catch (err) {\r\n      setError('Failed to delete student');\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('role');\r\n    navigate('/login');\r\n  };\r\n\r\n  if (loading) return <p>Loading students...</p>;\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      <h2>Admin Dashboard</h2>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n      <form onSubmit={onSubmit} style={{ marginBottom: '30px' }}>\r\n        <input type=\"text\" name=\"name\" placeholder=\"Student Name\" value={form.name} onChange={onChange} required />\r\n        <input type=\"email\" name=\"email\" placeholder=\"Student Email\" value={form.email} onChange={onChange} required />\r\n        <input type=\"text\" name=\"course\" placeholder=\"Course\" value={form.course} onChange={onChange} />\r\n        <button type=\"submit\">{editId ? 'Update Student' : 'Add Student'}</button>\r\n      </form>\r\n\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th><th>Email</th><th>Course</th><th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {students.length === 0 ? (\r\n            <tr><td colSpan=\"4\">No students found</td></tr>\r\n          ) : students.map(student => (\r\n            <tr key={student._id}>\r\n              <td>{student.user?.name || 'N/A'}</td>\r\n              <td>{student.user?.email || 'N/A'}</td>\r\n              <td>{student.course || 'N/A'}</td>\r\n              <td>\r\n                <button onClick={() => onEdit(student)}>Edit</button>\r\n                <button onClick={() => onDelete(student._id)}>Delete</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      <button onClick={logout} style={{ marginTop: '20px' }}>Logout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}